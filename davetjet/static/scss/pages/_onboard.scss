/* Onboard v2 — estetik cam tooltip + spotlight + progress */
/* Tema değişkenleri */
.onb-root {
  --onb-accent: #3c8f52;
  --onb-bg: rgba(255, 255, 255, .78);
  --onb-border: rgba(255, 255, 255, .38);
  --onb-text: #0f1b16;
  --onb-muted: #5e6a63;
  --onb-shadow: 0 28px 80px rgba(0, 0, 0, .18);
  --onb-z: 9999;
  --onb-backdrop: rgba(12, 18, 15, .55);
  --onb-blur: 12px;

  position: fixed;
  inset: 0;
  z-index: var(--onb-z);
  pointer-events: none;
}

/* Dört blokla spotlight (mask hack yok, mobile-safe) */
.onb-veil {
  position: fixed;
  inset: 0;
  pointer-events: auto;
}

.onb-block {
  position: fixed;
  background: var(--onb-backdrop);
  backdrop-filter: blur(var(--onb-blur));
  transition: all .18s ease;
}

.onb-block--top,
.onb-block--left,
.onb-block--right,
.onb-block--bottom {
  will-change: top, left, width, height;
}

/* Odak halkası (pulse) */
@keyframes onbPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(60, 143, 82, .35)
  }

  100% {
    box-shadow: 0 0 0 12px rgba(60, 143, 82, 0)
  }
}

.onb-focus-ring {
  position: fixed;
  border-radius: 14px;
  outline: 2px solid rgba(60, 143, 82, .55);
  background: transparent;
  animation: onbPulse 1.8s ease-out infinite;
  pointer-events: none;
  transition: all .18s ease;
}

/* Tooltip (glass) */
.onb-pop {
  position: fixed;
  max-width: min(460px, 92vw);
  pointer-events: auto;
  color: var(--onb-text);
  background: var(--onb-bg);
  -webkit-backdrop-filter: blur(18px) saturate(1.1);
  backdrop-filter: blur(18px) saturate(1.1);
  border: 1px solid var(--onb-border);
  border-radius: 16px;
  box-shadow: var(--onb-shadow);
}

.onb-pop__inner {
  padding: 16px 16px 12px;
  display: grid;
  gap: 10px;
}

.onb-pop__title {
  font-weight: 700;
  font-size: 18px;
  line-height: 1.25;
}

.onb-pop__desc {
  font-size: 14px;
  color: var(--onb-muted);
}

.onb-pop__progress {
  height: 4px;
  background: rgba(0, 0, 0, .08);
  border-radius: 999px;
  overflow: hidden;
}

.onb-pop__bar {
  height: 100%;
  width: 0%;
  background: var(--onb-accent);
  transition: width .2s ease;
}

.onb-pop__dots {
  display: flex;
  gap: 6px;
  align-items: center;
  flex-wrap: wrap;
}

.onb-pop__dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(0, 0, 0, .25);
}

.onb-pop__dot--active {
  background: var(--onb-accent);
  transform: scale(1.35);
}

.onb-pop__footer {
  display: flex;
  gap: 10px;
  justify-content: space-between;
  align-items: center;
}

.onb-steps {
  font-size: 12px;
  color: var(--onb-muted);
}

.onb-actions {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

.onb-btn {
  all: unset;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}

.onb-btn--ghost {
  color: var(--onb-muted);
  background: rgba(255, 255, 255, .55);
  border: 1px solid var(--onb-border);
}

.onb-btn--pri {
  color: #fff;
  background: var(--onb-accent);
}

.onb-btn[disabled] {
  opacity: .6;
  cursor: not-allowed;
}

.onb-close {
  position: absolute;
  top: 6px;
  right: 8px;
  width: 28px;
  height: 28px;
  border-radius: 8px;
  display: grid;
  place-items: center;
  cursor: pointer;
  color: var(--onb-muted);
}

.onb-close:hover {
  background: rgba(0, 0, 0, .06);
}

.onb-arrow {
  position: absolute;
  width: 12px;
  height: 12px;
  background: var(--onb-bg);
  border-left: 1px solid var(--onb-border);
  border-top: 1px solid var(--onb-border);
  transform: rotate(45deg);
}

.onb-arrow--top {
  top: -6px;
}

.onb-arrow--bottom {
  bottom: -6px;
  transform: rotate(225deg);
}

.onb-arrow--left {
  left: -6px;
  transform: rotate(135deg);
}

.onb-arrow--right {
  right: -6px;
  transform: rotate(-45deg);
}

/* Dialog semantics */
.onb-pop[role="dialog"] {
  outline: none;
}

/* Body scroll kilidi */
.onb-open {
  overflow: hidden;
}

/* Küçük ekran */
@media (max-width: 480px) {
  .onb-pop__inner {
    padding: 12px;
  }

  .onb-pop__title {
    font-size: 16px;
  }

  .onb-pop__desc {
    font-size: 13px;
  }
}

/* onb kapalıyken overlay asla tıklama yakalamasın */
.onb-root {
  pointer-events: none;
}

.onb-open .onb-root {
  pointer-events: auto;
}

.task-trigger {
  position: relative;
  display: grid;
  place-items: center;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid #e6e8eb;
  background: #fff;
  color: #3c8f52;
  cursor: pointer;
}

.task-trigger i {
  font-size: 16px;
}

.task-trigger:focus {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

.badge-dot {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 8px;
  height: 8px;
  background: #e11d48;
  border-radius: 50%;
}

/* Drawer */
.task-drawer {
  position: fixed;
  right: 12px;
  top: 70px;
  bottom: 12px;
  width: 360px;
  max-width: 92vw;
  background: #fff;
  color: #222;
  border: 1px solid #e6e8eb;
  border-radius: 14px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, .10);
  z-index: 9999;
  transform: translateY(16px) scale(.98);
  opacity: 0;
  pointer-events: none;
  transition: transform .18s ease, opacity .18s ease;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.task-drawer[aria-hidden="false"] {
  transform: none;
  opacity: 1;
  pointer-events: auto;
}

.td-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid #f0f2f4;
}

.td-title {
  display: flex;
  gap: 8px;
  align-items: center;
}

.td-title i {
  color: #3c8f52;
}

.td-close {
  background: none;
  border: 0;
  font-size: 22px;
  line-height: 1;
  cursor: pointer;
  color: #667085;
}

.td-progress {
  padding: 12px 14px;
  border-bottom: 1px solid #f0f2f4;
}

.td-progress__bar {
  height: 6px;
  background: #f3f5f6;
  border-radius: 6px;
  overflow: hidden;
}

.td-progress__bar span {
  display: block;
  height: 100%;
  background: #3c8f52;
}

.td-list {
  list-style: none;
  margin: 0;
  padding: 8px 8px 16px;
  overflow: auto;
}

.td-item {
  padding: 10px 8px;
  border-radius: 10px;
  border: 1px solid #eef1f3;
  margin: 8px;
  display: grid;
  gap: 6px;
  background: #fff;
}

.td-item.done {
  opacity: .72;
  background: #f7fff9;
  border-color: #e2f3e7;
}

.td-item .td-item__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.td-item h4 {
  margin: 0;
  font-size: 15px;
}

.td-item p {
  margin: 0;
  color: #667085;
  font-size: 13px;
}

.td-tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.td-tag {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 20px;
  background: #f3f5f6;
  color: #556;
}

.td-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.td-actions .btn {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
}

.btn--primary {
  background: #3c8f52;
  color: #fff;
  border-color: #3c8f52;
}

.td-foot {
  padding: 12px 14px;
  border-top: 1px solid #f0f2f4;
}

/* --- Task Drawer · Polished Overrides ----------------------------------- */
/* Tasarım değişkenleri */
.task-drawer {
  --td-accent: #3c8f52;
  --td-bg: #ffffff;
  --td-surface: #fcfcfd;
  --td-border: #e6e8eb;
  --td-text: #1f2937;
  --td-muted: #6b7280;
  --td-chip-bg: #eff6f3;
  --td-chip-text: #285a3a;

  font-size: 14px;
  letter-spacing: .1px;
  border-radius: 16px;
  border-color: var(--td-border);
  background: var(--td-bg);
}

/* Koyu tema desteği (sistem) */
// @media (prefers-color-scheme: dark) {
//   .task-drawer {
//     --td-bg: #0b0f14;
//     --td-surface: #0f141a;
//     --td-border: #1b2230;
//     --td-text: #e6edf3;
//     --td-muted: #a3b0bf;
//     --td-chip-bg: #13221a;
//     --td-chip-text: #a6e3c2;
//   }
// }

/* Header */
.task-drawer .td-head {
  padding: 16px 18px;
  border-bottom: 1px solid var(--td-border);
  background: linear-gradient(180deg, rgba(60, 143, 82, .05), transparent);
}

.task-drawer .td-title i {
  font-size: 18px;
  color: var(--td-accent);
}

.task-drawer .td-title strong {
  font-size: 16.5px;
  color: var(--td-text);
}

.task-drawer .td-close {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  color: var(--td-muted);
  background: transparent;
  border: 0;
}

.task-drawer .td-close:hover {
  background: var(--td-surface);
  color: var(--td-text);
}

.task-drawer .td-close:focus-visible {
  outline: 3px solid color-mix(in oklab, var(--td-accent) 35%, transparent);
  outline-offset: 2px;
}

/* Progress */
.task-drawer .td-progress {
  padding: 12px 18px;
  border-bottom: 1px solid var(--td-border);
}

.task-drawer .td-progress__bar {
  height: 8px;
  background: var(--td-surface);
  border-radius: 999px;
}

.task-drawer .td-progress__bar span {
  background: var(--td-accent);
  box-shadow: 0 1px 0 rgba(0, 0, 0, .06) inset;
}

.task-drawer #tdProgressText {
  display: block;
  margin-top: 6px;
  color: var(--td-muted);
  font-size: 12.5px;
}

/* Liste */
.task-drawer .td-list {
  padding: 10px 10px 16px;
}

.task-drawer .td-item {
  background: var(--td-surface);
  border-color: var(--td-border);
  padding: 12px 12px;
  border-radius: 12px;
}

.task-drawer .td-item .td-item__head {
  margin-bottom: 4px;
}

.task-drawer .td-item h4 {
  font-size: 15.5px;
  color: var(--td-text);
  font-weight: 650;
}

.task-drawer .td-item p {
  font-size: 13.5px;
  color: var(--td-muted);
}

.task-drawer .td-item.done {
  background: color-mix(in oklab, var(--td-accent) 7%, var(--td-surface));
  border-color: color-mix(in oklab, var(--td-accent) 18%, var(--td-border));
  opacity: 1;
}

.task-drawer .td-tags {
  gap: 6px;
}

.task-drawer .td-tag {
  background: var(--td-chip-bg);
  color: var(--td-chip-text);
  border: 1px solid color-mix(in oklab, var(--td-accent) 20%, transparent);
  padding: 3px 10px;
  border-radius: 999px;
  font-weight: 600;
}

/* Butonlar – yüksek kontrast */
.task-drawer .td-actions {
  gap: 8px;
}

.task-drawer .td-actions .btn,
.task-drawer .td-foot .btn {
  --btn-bg: #f4f6f8;
  --btn-text: #0f172a;
  --btn-border: #d7dbe0;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--btn-border);
  font-weight: 600;
  line-height: 1.1;
}

.task-drawer .td-actions .btn:hover,
.task-drawer .td-foot .btn:hover {
  filter: brightness(0.98);
}

.task-drawer .td-actions .btn:focus-visible,
.task-drawer .td-foot .btn:focus-visible {
  outline: 3px solid color-mix(in oklab, var(--td-accent) 35%, transparent);
  outline-offset: 2px;
}

/* Primary varyant */
.task-drawer .btn--primary {
  --btn-bg: var(--td-accent);
  --btn-text: #fff;
  --btn-border: color-mix(in oklab, var(--td-accent) 88%, black 12%);
  box-shadow: 0 6px 16px color-mix(in oklab, var(--td-accent) 32%, transparent);
}

.task-drawer .btn--primary:hover {
  filter: brightness(1.02);
}

/* Footer */
.task-drawer .td-foot {
  padding: 14px 18px;
  border-top: 1px solid var(--td-border);
  background: linear-gradient(0deg, rgba(60, 143, 82, .05), transparent);
}

/* Trigger butonu – okunaklılık */
.top-actions .task-trigger {
  color: var(--td-accent);
  border-color: var(--td-border);
  background: var(--td-bg);
}

.top-actions .task-trigger:hover {
  background: var(--td-surface);
}

.top-actions .task-trigger:focus-visible {
  outline: 3px solid color-mix(in oklab, var(--td-accent) 35%, transparent);
  outline-offset: 2px;
}

.top-actions .task-trigger i {
  font-size: 17px;
}

/* Drawer açılma etkisi (daha net) */
.task-drawer {
  transform: translateY(10px) scale(.985);
  opacity: 0;
}

.task-drawer[aria-hidden="false"] {
  transform: none;
  opacity: 1;
  transition: transform .18s cubic-bezier(.2, .8, .2, 1), opacity .18s ease;
}

/* Mobil: daha geniş, rahat okunur */
@media (max-width: 768px) {
  .task-drawer {
    right: 8px;
    left: 8px;
    width: auto;
    top: 64px;
    bottom: 8px;
    border-radius: 14px;
    backdrop-filter: saturate(120%) blur(6px);
  }

  .task-drawer .td-item {
    padding: 12px;
  }

  .task-drawer .td-actions .btn {
    padding: 9px 12px;
  }
}

/* ==== Drawer görünümü (kontrast + tipografi güçlendirme) ==== */
.task-trigger {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid #E6E8EC;
  background: #fff;
  color: #1F2937;
  cursor: pointer;
}

.task-trigger:hover {
  background: #F7F8FA;
}

.task-trigger:focus-visible {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

.badge-pulse {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  font-size: 12px;
  line-height: 18px;
  border-radius: 9px;
  background: #dc2626;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  animation: pulse 1.2s ease-in-out infinite;
}

.badge-pulse.hidden {
  display: none;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, .45);
  }

  70% {
    box-shadow: 0 0 0 8px rgba(220, 38, 38, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
  }
}

/* Çekmece */
.task-drawer[hidden] {
  display: none;
}

.task-drawer {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(16, 24, 40, .35);
  backdrop-filter: saturate(1.1) blur(6px);
}

.task-drawer__panel {
  position: absolute;
  top: 0;
  right: 0;
  width: min(460px, 92vw);
  height: 100%;
  background: #fff;
  box-shadow: -12px 0 40px rgba(0, 0, 0, .12);
  display: flex;
  flex-direction: column;
  transform: translateX(8px);
  opacity: 0;
  transition: transform .24s ease, opacity .24s ease;
}

.task-drawer[aria-modal="true"] .task-drawer__panel {
  transform: none;
  opacity: 1;
}

.task-drawer__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 18px;
  border-bottom: 1px solid #EEF2F6;
}

.task-drawer__head .left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.task-drawer__head h3 {
  font-size: 20px;
  font-weight: 700;
  color: #0F172A;
  letter-spacing: .2px;
  margin: 0;
}

.td-close {
  border: none;
  background: #F2F4F7;
  width: 34px;
  height: 34px;
  border-radius: 9px;
  color: #0F172A;
  cursor: pointer;
}

.td-close:hover {
  background: #E6E8EC;
}

.td-close:focus-visible {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

.task-drawer__tabs {
  display: flex;
  gap: 8px;
  padding: 10px 16px 0;
}

.td-tab {
  border: none;
  background: #F8FAFC;
  color: #1F2937;
  padding: 8px 12px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 600;
}

.td-tab.active {
  background: #e8f5ed;
  color: #166534;
}

.task-filter {
  padding: 8px 16px 0;
}

.task-filter input {
  width: 100%;
  border: 1px solid #E5E7EB;
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 14px;
}

.task-filter input:focus {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

.task-drawer__body {
  padding: 10px 12px 16px;
  overflow: auto;
}

.task-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.task-list.hidden {
  display: none;
}

.task-card {
  border: 1px solid #EEF2F6;
  border-radius: 14px;
  padding: 12px;
  background: #fff;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: flex-start;
}

.task-card .title {
  font-size: 16px;
  font-weight: 700;
  color: #0B1220;
  margin-bottom: 2px;
}

.task-card .desc {
  font-size: 13.5px;
  color: #475569;
}

.task-card .meta {
  display: flex;
  gap: 6px;
  margin-top: 6px;
}

.task-card .chip {
  font-size: 12px;
  background: #F1F5F9;
  color: #334155;
  padding: 4px 8px;
  border-radius: 999px;
}

.task-card .chip.crit {
  background: #FEF2F2;
  color: #B91C1C;
}

.task-card .chip.reco {
  background: #EEFDF3;
  color: #166534;
}

.task-card .chip.time {
  background: #EEF2FF;
  color: #4338CA;
}

.task-card .actions {
  display: flex;
  gap: 8px;
}

.task-btn {
  border: 1px solid #E5E7EB;
  background: #0F172A;
  color: #fff;
  border-radius: 10px;
  padding: 8px 10px;
  font-weight: 600;
  cursor: pointer;
}

.task-btn.ghost {
  background: #fff;
  color: #0F172A;
}

.task-btn.ghost:hover {
  background: #F3F4F6;
}

.task-btn:focus-visible {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

.task-menu {
  position: relative;
}

.task-menu-btn {
  border: 1px solid #E5E7EB;
  background: #fff;
  width: 34px;
  height: 34px;
  border-radius: 9px;
  cursor: pointer;
  color: #0F172A;
}

.task-menu-btn:hover {
  background: #F7F8FA;
}

.task-menu-pop {
  position: absolute;
  top: 40px;
  right: 0;
  min-width: 200px;
  background: #fff;
  border: 1px solid #E5E7EB;
  border-radius: 10px;
  box-shadow: 0 12px 30px rgba(0, 0, 0, .08);
  padding: 6px;
  display: none;
  z-index: 2;
}

.task-menu-pop.open {
  display: block;
}

.task-menu-pop button {
  width: 100%;
  text-align: left;
  border: none;
  background: #fff;
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  color: #0B1220;
}

.task-menu-pop button:hover {
  background: #F7F8FA;
}

/* Erişilebilir yardımcılar */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .task-drawer__panel {
    transition: none;
  }

  .badge-pulse {
    animation: none;
  }
}

/* === UPDATE: Drawer görünürlüğü ve overlay === */
.task-drawer[aria-hidden="true"] {
  display: none;
}

/* kapalıyken gizle */
.td-overlay {
  position: fixed;
  inset: 0;
  background: rgba(16, 24, 40, .36);
  backdrop-filter: saturate(1.05) blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
  z-index: 9998;
}

.td-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

/* === UPDATE: Başlık & kapat butonu kontrast === */
.td-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid #EEF2F6;
}

.td-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.td-title strong {
  font-size: 18px;
  font-weight: 800;
  color: #0B1220;
}

.td-close {
  border: none;
  background: #F2F4F7;
  width: 34px;
  height: 34px;
  border-radius: 9px;
  color: #0F172A;
  cursor: pointer;
}

.td-close:hover {
  background: #E6E8EC;
}

.td-close:focus-visible {
  outline: 2px solid #3c8f52;
  outline-offset: 2px;
}

/* === UPDATE: İlerleme çubuğu okunurluk === */
.td-progress {
  padding: 10px 14px 4px;
}

.td-progress__bar {
  height: 8px;
  background: #EEF2F6;
  border-radius: 999px;
  overflow: hidden;
}

.td-progress__bar>span {
  display: block;
  height: 100%;
  background: #3c8f52;
  border-radius: 999px;
  transition: width .2s ease;
}

#tdProgressText {
  color: #475569;
  margin-top: 6px;
  display: inline-block;
}

/* === NEW: Görev kartları (td-list içi) === */
.td-list {
  list-style: none;
  margin: 10px 12px 14px;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.td-empty {
  color: #64748B;
  text-align: center;
  padding: 16px 8px;
  border: 1px dashed #E5E7EB;
  border-radius: 12px;
}

.td-item {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  border: 1px solid #EEF2F6;
  border-radius: 14px;
  background: #fff;
  padding: 12px;
}

.td-item__title {
  font-size: 16px;
  font-weight: 700;
  color: #0B1220;
  margin-bottom: 2px;
}

.td-item__desc {
  font-size: 13.5px;
  color: #475569;
}

.td-item__meta {
  display: flex;
  gap: 6px;
  margin-top: 6px;
}

.td-chip {
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 999px;
  background: #F1F5F9;
  color: #334155;
}

.td-chip--crit {
  background: #FEF2F2;
  color: #B91C1C;
}

.td-chip--reco {
  background: #EEFDF3;
  color: #166534;
}

.td-chip--page {
  background: #EEF2FF;
  color: #4338CA;
}

.td-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Buton kontrastı (beyaz görünüyordu) */
.btn {
  border: 1px solid #E5E7EB;
  border-radius: 10px;
  padding: 8px 10px;
  font-weight: 700;
  cursor: pointer;
}

.btn--dark {
  background: #0F172A;
  color: #fff;
}

.btn--dark:hover {
  filter: brightness(1.06);
}

.btn--ghost {
  background: #fff;
  color: #0F172A;
}

.btn--ghost:hover {
  background: #F8FAFC;
}

.btn--success {
  background: #3c8f52;
  color: #fff;
  border-color: #2f7041;
}

.btn--success:hover {
  filter: brightness(1.06);
}

/* Üç nokta menü */
.td-menu {
  position: relative;
}

.td-menu__btn {
  width: 34px;
  height: 34px;
  border: 1px solid #E5E7EB;
  border-radius: 9px;
  background: #fff;
  color: #0F172A;
  cursor: pointer;
}

.td-menu__btn:hover {
  background: #F7F8FA;
}

.td-menu__pop {
  position: absolute;
  top: 40px;
  right: 0;
  min-width: 200px;
  background: #fff;
  border: 1px solid #E5E7EB;
  border-radius: 10px;
  box-shadow: 0 12px 30px rgba(0, 0, 0, .08);
  padding: 6px;
  display: none;
  z-index: 10000;
}

.td-menu__pop.open {
  display: block;
}

.td-menu__pop button {
  width: 100%;
  text-align: left;
  border: none;
  background: #fff;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 14px;
  color: #0B1220;
  cursor: pointer;
}

.td-menu__pop button:hover {
  background: #F7F8FA;
}

/* Trigger + rozet */
.task-trigger {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid #E6E8EC;
  background: #fff;
  color: #1F2937;
  cursor: pointer;
}

.task-trigger:hover {
  background: #F7F8FA;
}

.badge-pulse {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  font-size: 12px;
  line-height: 18px;
  border-radius: 9px;
  background: #dc2626;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  animation: pulse 1.2s ease-in-out infinite;
  animation-play-state: paused;
}

.badge-pulse.hidden {
  display: none;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, .45);
  }

  70% {
    box-shadow: 0 0 0 8px rgba(220, 38, 38, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .badge-pulse {
    animation: none !important;
  }
}

/* Drawer görünürlüğü – iki yaklaşımı da destekle */
.task-drawer[aria-hidden="true"] {
  display: none;
}

/* aria tabanlı kapama */
.task-drawer.open {
  display: block;
}

/* class tabanlı açma */

/* Overlay z-index & görünürlük */
.td-overlay {
  position: fixed;
  inset: 0;
  background: rgba(16, 24, 40, .36);
  backdrop-filter: saturate(1.05) blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
  z-index: 9998;
}

.td-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

/* Trigger & rozet: pulse ikonun üste alınması */
.task-trigger {
  position: relative;
  isolation: isolate;
  /* yeni stacking context */
  z-index: 1;
  /* üst katman */
}

.task-trigger i {
  position: relative;
  z-index: 1;
}

.badge-pulse {
  position: absolute;
  top: -4px;
  right: -4px;
  z-index: 10;
  /* ikonun ÜSTÜNDE */
}

/* Güvenlik: Drawer z seviyesi */
.task-drawer {
  z-index: 9999;
  position: relative;
}

/* =========================
   TASK DRAWER — LIGHT REVAMP
   (yalnızca GÜNCELLEME/EK)
   ========================= */

/* Tema token’ları (yerel) */
.task-drawer {
  --td-bg: #ffffff;
  --td-fg: #1f2937;
  /* slate-800 */
  --td-muted: #6b7280;
  /* slate-500 */
  --td-border: #e5e7eb;
  /* slate-200 */
  --td-border-strong: #d1d5db;
  /* slate-300 */
  --td-soft: #f8fafc;
  /* slate-50 */
  --td-shadow: 0 18px 50px rgba(0, 0, 0, .10);
  --td-accent: #3c8f52;
  /* brand */
}

/* Konteyner / layout */
.task-drawer {
  position: fixed;
  top: 0;
  right: 0;
  width: min(420px, calc(100vw - 56px));
  height: 100dvh;
  background: var(--td-bg);
  color: var(--td-fg);
  border-left: 1px solid var(--td-border);
  box-shadow: var(--td-shadow);
  display: none;
  /* aria-hidden veya .open ile açılıyor */
  overflow: hidden;
  /* sticky header/footer için */
}

.task-drawer.open,
.task-drawer[aria-hidden="false"] {
  display: block;
}

/* İç scroll alanı (header/footer sabit kalabilsin) */
.task-drawer .td-scroll {
  height: calc(100% - 64px - 72px);
  /* header ~64, footer ~72 */
  overflow: auto;
  padding: 12px 16px 16px;
}

/* Header */
.td-head {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 18px;
  background: linear-gradient(180deg, rgba(255, 255, 255, .98), rgba(255, 255, 255, .95));
  border-bottom: 1px solid var(--td-border);
  backdrop-filter: saturate(1.05) blur(2px);
}

.td-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.td-title i {
  color: var(--td-accent);
  font-size: 1.1rem;
}

.td-title strong {
  font-weight: 700;
  font-size: 1.1rem;
  /* daha okunabilir başlık */
  letter-spacing: .2px;
}

.td-close {
  border: 1px solid var(--td-border);
  background: #fff;
  color: #111827;
  width: 32px;
  height: 32px;
  line-height: 30px;
  text-align: center;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
}

.td-close:hover {
  background: var(--td-soft);
}

/* İlerleme */
.td-progress {
  padding: 12px 18px 6px;
  background: #fff;
  border-bottom: 1px solid var(--td-border);
}

.td-progress__bar {
  height: 8px;
  border-radius: 999px;
  background: #f3f4f6;
  /* slate-100 */
  overflow: hidden;
}

.td-progress__bar>span {
  display: block;
  height: 100%;
  background: linear-gradient(90deg, var(--td-accent), #2f7042);
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .02);
}

#tdProgressText {
  display: block;
  margin-top: 8px;
  color: var(--td-muted);
  font-size: .85rem;
}

/* Liste (görevler) */
.td-list {
  list-style: none;
  margin: 0;
  padding: 12px 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: linear-gradient(180deg, #fff, #fbfcfe);
}

.td-list>li {
  background: #fff;
  border: 1px solid var(--td-border);
  border-radius: 14px;
  padding: 12px 12px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
  transition: box-shadow .15s ease, border-color .15s ease, transform .06s ease;
}

.td-list>li:hover {
  border-color: var(--td-border-strong);
  box-shadow: 0 8px 24px rgba(0, 0, 0, .06);
  transform: translateY(-1px);
}

/* Genel tipografi içi */
.td-list>li .td-item__title {
  font-weight: 600;
  font-size: .98rem;
  color: #0f172a;
  /* slate-900 */
  line-height: 1.3;
}

.td-list>li .td-item__desc {
  margin-top: 2px;
  color: var(--td-muted);
  font-size: .9rem;
}

.td-list>li .pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--td-border);
  background: var(--td-soft);
  color: #334155;
  font-size: .78rem;
}

/* Checkbox (varsa .td-check yapısı) */
.td-check {
  display: flex;
  align-items: center;
  gap: 10px;
}

.td-check input {
  appearance: none;
  width: 18px;
  height: 18px;
  border: 1.5px solid #94a3b8;
  border-radius: 4px;
  display: grid;
  place-items: center;
  cursor: pointer;
}

.td-check input:checked {
  background: var(--td-accent);
  border-color: var(--td-accent);
}

.td-check input:checked::after {
  content: "";
  width: 10px;
  height: 10px;
  transform: rotate(45deg);
  border-right: 2px solid #fff;
  border-bottom: 2px solid #fff;
  margin-top: -2px;
}

/* Done state (tamamlanan) */
.td-item--done {
  opacity: .72;
}

.td-item--done .td-item__title {
  text-decoration: line-through;
}

/* Footer */
.td-foot {
  position: sticky;
  bottom: 0;
  z-index: 2;
  padding: 12px 18px;
  background: linear-gradient(0deg, rgba(255, 255, 255, .98), rgba(255, 255, 255, .95));
  border-top: 1px solid var(--td-border);
  backdrop-filter: saturate(1.05) blur(2px);
  display: flex;
  justify-content: center;
}

/* Drawer içi butonlar — kontrast düzeltildi */
.task-drawer .btn {
  --btn-bg: #111827;
  /* neutral/primary */
  --btn-fg: #ffffff;
  --btn-bd: transparent;
  background: var(--btn-bg);
  color: var(--btn-fg);
  border: 1px solid var(--btn-bd);
  padding: .75rem 1rem;
  border-radius: 10px;
  font-weight: 600;
  box-shadow: 0 1px 0 rgba(255, 255, 255, .3) inset, 0 6px 16px rgba(0, 0, 0, .08);
}

.task-drawer .btn:hover {
  filter: brightness(1.05);
}

.task-drawer .btn:active {
  transform: translateY(1px);
}

/* varyantlar */
.task-drawer .btn.btn--success {
  --btn-bg: var(--td-accent);
}

.task-drawer .btn.btn--ghost {
  --btn-bg: #fff;
  --btn-fg: #111827;
  --btn-bd: var(--td-border-strong);
  box-shadow: none;
}

.task-drawer .btn.btn--danger {
  --btn-bg: #dc2626;
  /* red-600 */
}

/* Kırmızı/beyaz okunmama sorunu yaşayan eski stilleri bastır */
.task-drawer .btn,
.task-drawer .btn * {
  color: inherit;
}

/* Overlay (z-index & parlaklık) */
.td-overlay {
  position: fixed;
  inset: 0;
  background: rgba(17, 24, 39, .45);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
  z-index: 9998;
}

.td-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

/* Trigger ve badge — badge ikonun ÜSTÜNDE */
.task-trigger {
  position: relative;
  isolation: isolate;
  z-index: 1;
}

.task-trigger i {
  position: relative;
  z-index: 1;
}

.badge-pulse {
  position: absolute;
  top: -4px;
  right: -4px;
  z-index: 10;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: #ef4444;
  box-shadow: 0 0 0 0 rgba(239, 68, 68, .5);
  animation: tdPulse 1.6s infinite;
}

@keyframes tdPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, .55);
  }

  70% {
    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}

/* Küçük ekranlar */
@media (max-width: 560px) {
  .task-drawer {
    width: 100vw;
  }

  .td-title strong {
    font-size: 1.05rem;
  }

  .td-list>li {
    padding: 12px;
    grid-template-columns: auto 1fr;
  }
}

/* =========================================
   TASK DRAWER — RIGHT SLIDE + LIGHT POLISH
   (yalnızca GÜNCELLEME/EK BLOĞU)
   ========================================= */

/* Yerel tema token’ları (drawer kapsamı) */
.task-drawer {
  --td-bg: #ffffff;
  --td-fg: #0f172a;
  /* slate-900 */
  --td-muted: #64748b;
  /* slate-500 */
  --td-border: #e5e7eb;
  /* slate-200 */
  --td-border-strong: #d1d5db;
  /* slate-300 */
  --td-soft: #f8fafc;
  /* slate-50 */
  --td-accent: #3c8f52;
  /* brand */
  --td-shadow: 0 20px 60px rgba(15, 23, 42, .18);
}

/* Sağ çekmece: sağdan içeri kayan animasyon */
.task-drawer {
  position: fixed;
  inset: 0 0 0 auto;
  /* top:0; right:0; bottom:0 */
  width: min(420px, calc(100vw - 56px));
  height: 100dvh;
  background:
    radial-gradient(1200px 300px at 100% 0%, rgba(60, 143, 82, .06) 0%, transparent 40%),
    linear-gradient(#fff, #fff);
  /* çok hafif brand parıltısı */
  color: var(--td-fg);
  border-left: 1px solid var(--td-border);
  box-shadow: var(--td-shadow);
  border-top-left-radius: 16px;
  border-bottom-left-radius: 16px;
  overflow: hidden;

  /* kapalıyken görünmesin ve sağa itilmiş olsun */
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;

  /* yumuşak animasyon */
  transition:
    transform 260ms cubic-bezier(.22, .9, .26, 1),
    opacity 200ms ease;
  z-index: 9999;
  /* overlay’in üstünde */
}

/* Açık durum: .open VEYA aria-hidden="false" */
.task-drawer.open,
.task-drawer[aria-hidden="false"] {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

/* Header: daha tok tipografi ve cam etkisi */
.td-head {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 18px;
  background: color-mix(in srgb, #fff 92%, transparent);
  border-bottom: 1px solid var(--td-border);
  backdrop-filter: saturate(1.05) blur(3px);
}

.td-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.td-title i {
  color: var(--td-accent);
  font-size: 1.1rem;
}

.td-title strong {
  font-weight: 700;
  font-size: 1.14rem;
  letter-spacing: .2px;
  color: #0b1220;
}

.td-close {
  border: 1px solid var(--td-border);
  background: #fff;
  color: #111827;
  width: 34px;
  height: 34px;
  line-height: 32px;
  text-align: center;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, transform .06s ease;
}

.td-close:hover {
  background: var(--td-soft);
  border-color: var(--td-border-strong);
}

.td-close:active {
  transform: translateY(1px);
}

/* Progress: daha belirgin dolum */
.td-progress {
  padding: 12px 18px 8px;
  border-bottom: 1px solid var(--td-border);
  background: #fff;
}

.td-progress__bar {
  height: 9px;
  border-radius: 999px;
  background: #f3f4f6;
  overflow: hidden;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .7);
}

.td-progress__bar>span {
  display: block;
  height: 100%;
  background:
    linear-gradient(90deg, var(--td-accent), #2f7042);
  box-shadow: 0 1px 0 rgba(255, 255, 255, .35) inset;
}

#tdProgressText {
  display: block;
  margin-top: 8px;
  color: var(--td-muted);
  font-size: .88rem;
}

/* Liste kartları: light + hover shadow */
.td-list {
  list-style: none;
  margin: 0;
  padding: 14px 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: linear-gradient(180deg, #ffffff, #fbfcfe 60%);
}

.td-list>li {
  background: #fff;
  border: 1px solid var(--td-border);
  border-radius: 14px;
  padding: 12px 12px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;

  transition: box-shadow .15s ease, border-color .15s ease, transform .06s ease;
}

.td-list>li:hover {
  border-color: var(--td-border-strong);
  box-shadow: 0 10px 26px rgba(15, 23, 42, .08);
  transform: translateY(-1px);
}

.td-item__title {
  font-weight: 600;
  font-size: 1rem;
  color: #0f172a;
  line-height: 1.3;
}

.td-item__desc {
  margin-top: 2px;
  color: var(--td-muted);
  font-size: .9rem;
}

.td-list .pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--td-border);
  background: var(--td-soft);
  color: #334155;
  font-size: .78rem;
}

/* Tamamlanan görev görsel durumu */
.td-item--done {
  opacity: .75;
}

.td-item--done .td-item__title {
  text-decoration: line-through;
}

/* Footer: cam efekti + buton kontrast düzeltme */
.td-foot {
  position: sticky;
  bottom: 0;
  z-index: 2;
  padding: 12px 18px;
  background: color-mix(in srgb, #fff 92%, transparent);
  border-top: 1px solid var(--td-border);
  backdrop-filter: saturate(1.05) blur(3px);
  display: flex;
  justify-content: center;
}

.task-drawer .btn {
  --btn-bg: #111827;
  /* koyu arka plan */
  --btn-fg: #ffffff;
  /* beyaz metin */
  --btn-bd: transparent;
  background: var(--btn-bg);
  color: var(--btn-fg);
  border: 1px solid var(--btn-bd);
  padding: .78rem 1rem;
  border-radius: 10px;
  font-weight: 700;
  letter-spacing: .2px;
  box-shadow: 0 1px 0 rgba(255, 255, 255, .25) inset, 0 8px 18px rgba(0, 0, 0, .08);
}

.task-drawer .btn:hover {
  filter: brightness(1.05);
}

.task-drawer .btn:active {
  transform: translateY(1px);
}

.task-drawer .btn.btn--success {
  --btn-bg: var(--td-accent);
}

.task-drawer .btn.btn--ghost {
  --btn-bg: #fff;
  --btn-fg: #111827;
  --btn-bd: var(--td-border-strong);
  box-shadow: none;
}

/* Trigger & badge z-index düzeltmesi (ikonun üstünde görünsün) */
.top-actions .notification-trigger,
.top-actions .task-trigger {
  position: relative;
  z-index: 3;
}

.top-actions .badge-pulse {
  position: absolute;
  top: -4px;
  right: -4px;
  z-index: 4;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: #ef4444;
  box-shadow: 0 0 0 0 rgba(239, 68, 68, .5);
  animation: tdPulse 1.6s infinite;
}

@keyframes tdPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, .55);
  }

  70% {
    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}

/* Erişilebilirlik: animasyonu kapatmak isteyenlere saygı */
@media (prefers-reduced-motion: reduce) {
  .task-drawer {
    transition: none;
  }

  .top-actions .badge-pulse {
    animation: none;
  }
}

/* Mobil: tam genişlik ve daha büyük dokunma alanları */
@media (max-width: 560px) {
  .task-drawer {
    width: 100vw;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
  }

  .td-title strong {
    font-size: 1.06rem;
  }

  .td-list>li {
    padding: 12px;
    grid-template-columns: auto 1fr;
  }
}

/* ===== TASK ITEM: three-dots + anchored menu ===== */
.td-item {
  position: relative;
}

.td-item__check {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: 1px solid var(--td-border);
  background: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color .15s ease, background .15s ease, transform .06s ease;
}

.td-item__check:hover {
  border-color: var(--td-border-strong);
}

.td-item__check i {
  font-size: 12px;
  color: #fff;
  opacity: 0;
  transition: opacity .12s;
}

.td-item--done .td-item__check {
  background: var(--td-accent);
  border-color: var(--td-accent);
}

.td-item--done .td-item__check i {
  opacity: 1;
}

.td-item__more {
  position: relative;
  width: 32px;
  height: 32px;
  border-radius: 10px;
  border: 1px solid var(--td-border);
  background: #fff;
  color: #111827;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background .15s, border-color .15s, transform .06s ease;
}

.td-item__more:hover {
  background: var(--td-soft);
  border-color: var(--td-border-strong);
}

.td-item__more:active {
  transform: translateY(1px);
}

/* Menü: fixed + arrow; drawer üstünde */
.td-menu {
  position: fixed;
  inset: auto auto auto auto;
  /* JS ile top/left atanıyor */
  z-index: 10000;
  min-width: 220px;
  background: #fff;
  border: 1px solid var(--td-border);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(15, 23, 42, .18);
  padding: 6px;
  opacity: 0;
  transform: translateY(-4px);
  pointer-events: none;
  transition: opacity .14s ease, transform .14s ease;
}

.td-menu.is-open {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.td-menu__item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 10px;
  border-radius: 10px;
  background: transparent;
  border: 0;
  cursor: pointer;
  color: #0f172a;
  transition: background .12s ease;
}

.td-menu__item i {
  color: var(--td-muted);
  width: 18px;
  text-align: center;
}

.td-menu__item:hover {
  background: #f8fafc;
}

.td-menu__sep {
  height: 1px;
  background: var(--td-border);
  margin: 6px 4px;
  border-radius: 1px;
}

/* Arrow */
.td-menu::after {
  content: "";
  position: absolute;
  width: 10px;
  height: 10px;
  background: #fff;
  border-left: 1px solid var(--td-border);
  border-top: 1px solid var(--td-border);
  transform: rotate(45deg);
}

.td-menu[data-arrow="top"]::after {
  top: -6px;
  left: 20px;
}

.td-menu[data-arrow="bottom"]::after {
  bottom: -6px;
  left: 20px;
  transform: rotate(225deg);
}

/* İç grid uyumu */
.td-item__meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.td-item__tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.td-item__tags .pill {
  background: var(--td-soft);
  color: #334155;
}

/* Drawer sağdan gelsin — zaten ekledik ama tekrar vurgulayalım */
.task-drawer {
  right: 0;
  left: auto;
}

/* ===== TASK ITEM: three-dots + anchored menu ===== */
.td-item {
  position: relative;
}

.td-item__check {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: 1px solid var(--td-border);
  background: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color .15s ease, background .15s ease, transform .06s ease;
}

.td-item__check:hover {
  border-color: var(--td-border-strong);
}

.td-item__check i {
  font-size: 12px;
  color: #fff;
  opacity: 0;
  transition: opacity .12s;
}

.td-item--done .td-item__check {
  background: var(--td-accent);
  border-color: var(--td-accent);
}

.td-item--done .td-item__check i {
  opacity: 1;
}

.td-item__more {
  position: relative;
  width: 32px;
  height: 32px;
  border-radius: 10px;
  border: 1px solid var(--td-border);
  background: #fff;
  color: #111827;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background .15s, border-color .15s, transform .06s ease;
}

.td-item__more:hover {
  background: var(--td-soft);
  border-color: var(--td-border-strong);
}

.td-item__more:active {
  transform: translateY(1px);
}

/* Menü: fixed + arrow; drawer üstünde */
.td-menu {
  position: fixed;
  inset: auto auto auto auto;
  /* JS ile top/left atanıyor */
  z-index: 10000;
  min-width: 220px;
  background: #fff;
  border: 1px solid var(--td-border);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(15, 23, 42, .18);
  padding: 6px;
  opacity: 0;
  transform: translateY(-4px);
  pointer-events: none;
  transition: opacity .14s ease, transform .14s ease;
}

.td-menu.is-open {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.td-menu__item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 10px;
  border-radius: 10px;
  background: transparent;
  border: 0;
  cursor: pointer;
  color: #0f172a;
  transition: background .12s ease;
}

.td-menu__item i {
  color: var(--td-muted);
  width: 18px;
  text-align: center;
}

.td-menu__item:hover {
  background: #f8fafc;
}

.td-menu__sep {
  height: 1px;
  background: var(--td-border);
  margin: 6px 4px;
  border-radius: 1px;
}

/* Arrow */
.td-menu::after {
  content: "";
  position: absolute;
  width: 10px;
  height: 10px;
  background: #fff;
  border-left: 1px solid var(--td-border);
  border-top: 1px solid var(--td-border);
  transform: rotate(45deg);
}

.td-menu[data-arrow="top"]::after {
  top: -6px;
  left: 20px;
}

.td-menu[data-arrow="bottom"]::after {
  bottom: -6px;
  left: 20px;
  transform: rotate(225deg);
}

/* İç grid uyumu */
.td-item__meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.td-item__tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.td-item__tags .pill {
  background: var(--td-soft);
  color: #334155;
}

/* Drawer sağdan gelsin — zaten ekledik ama tekrar vurgulayalım */
.task-drawer {
  right: 0;
  left: auto;
}