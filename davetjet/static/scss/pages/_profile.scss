@use '../abstracts/variables' as vars;

$colors: vars.$colors;

.profile-page {
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  background: map-get($colors, light);
  color: map-get($colors, dark);
  min-height: 100vh;
  padding: 3rem 4rem;
  display: flex;
  flex-direction: column;
  gap: 3rem;
  margin-top: 3rem;
  user-select: none;

  .glassmorphic {
    background: rgba(255, 255, 255, 0.35);
    backdrop-filter: saturate(180%) blur(18px);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.4);
    padding: 2rem 2.8rem;
    box-shadow: none;
  }

  .profile-header {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    height: 220px;
    background: linear-gradient(135deg,
        map-get($colors, 'primary-pastel'),
        map-get($colors, primary));

    .banner-upload-label {
      position: relative;
      display: block;
      height: 100%;
      cursor: pointer;

      .file-input {
        display: none;
      }

      .banner-image {
        width: 100%;
        height: 220px;
        object-fit: cover;
        filter: brightness(0.95);
        border-radius: 16px 16px 0 0;
        transition: filter 0.3s ease;
      }

      .banner-overlay {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.15);
        color: map-get($colors, primary);
        font-weight: 600;
        font-size: 1rem;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        border-radius: 16px 16px 0 0;
        transition: opacity 0.3s ease;

        i {
          font-size: 1.5rem;
          margin-right: 0.5rem;
        }
      }

      &:hover {
        .banner-image {
          filter: brightness(1);
        }

        .banner-overlay {
          opacity: 1;
        }
      }
    }

    .profile-pic-wrapper {
      position: absolute;
      bottom: -55px;
      left: 3rem;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.7);
      border: 3px solid map-get($colors, primary);
      overflow: hidden;

      .profile-pic-label {
        position: relative;
        width: 100%;
        height: 100%;
        cursor: pointer;
        display: block;
        border-radius: 50%;

        .file-input {
          display: none;
        }

        .profile-pic {
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 50%;
          transition: filter 0.3s ease;
        }

        .pic-overlay {
          position: absolute;
          inset: 0;
          background: rgba(255, 255, 255, 0.3);
          color: map-get($colors, primary);
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          opacity: 0;
          font-size: 1.3rem;
          transition: opacity 0.3s ease;
          user-select: none;
        }

        &:hover {
          .profile-pic {
            filter: brightness(1.1);
          }

          .pic-overlay {
            opacity: 1;
          }
        }
      }
    }
  }

  .profile-info {
    margin-top: 4.5rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    user-select: text;

    .profile-basic {
      display: flex;
      gap: 2rem;

      .editable-field {
        flex: 1;
        font-weight: 700;
        font-size: 1.8rem;
        color: map-get($colors, dark);
        border-bottom: 2px solid transparent;
        padding-bottom: 3px;
        outline: none;
        cursor: text;
        user-select: text;
        min-height: 40px;
        transition: border-color 0.25s ease;

        &[data-placeholder]:empty::before {
          content: attr(data-placeholder);
          color: map-get($colors, 'primary-aqua');
          user-select: none;
          pointer-events: none;
          font-weight: 400;
        }

        &:focus {
          border-color: map-get($colors, primary);
          background-color: rgba(map-get($colors, primary), 0.07);
          border-radius: 4px;
        }
      }
    }

    .profile-bio {
      display: flex;
      flex-direction: column;

      .bio-label {
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: map-get($colors, primary);
        font-size: 1.1rem;
        letter-spacing: 0.03em;
      }

      textarea {
        font-family: inherit;
        font-size: 1rem;
        padding: 0.8rem 1rem;
        border-radius: 10px;
        border: 1px solid rgba(map-get($colors, primary), 0.3);
        resize: vertical;
        min-height: 90px;
        line-height: 1.4;
        transition: border-color 0.25s ease;
        color: map-get($colors, dark);
        background: rgba(255, 255, 255, 0.85);

        &:focus {
          border-color: map-get($colors, primary);
          outline: none;
          background: rgba(map-get($colors, primary), 0.1);
        }
      }
    }

    .profile-contact {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;

      h4 {
        color: map-get($colors, primary);
        font-weight: 700;
        font-size: 1.25rem;
        margin-bottom: 1rem;
        letter-spacing: 0.02em;
      }

      .contact-group {
        display: flex;
        flex-direction: column;

        label {
          font-weight: 600;
          font-size: 0.95rem;
          color: map-get($colors, dark);
          margin-bottom: 0.25rem;
          user-select: none;
        }

        input {
          padding: 0.5rem 0.9rem;
          font-size: 1.05rem;
          border-radius: 8px;
          border: 1.5px solid rgba(map-get($colors, primary), 0.35);
          outline: none;
          color: map-get($colors, dark);
          background: rgba(255, 255, 255, 0.9);
          transition: border-color 0.25s ease, background-color 0.25s ease;

          &:focus {
            border-color: map-get($colors, primary);
            background: rgba(map-get($colors, primary), 0.12);
          }
        }
      }

      .social-links {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;

        label {
          display: flex;
          align-items: center;
          gap: 0.4rem;
          font-weight: 600;
          color: map-get($colors, dark);
          flex-basis: 100%;
          user-select: none;

          i {
            color: map-get($colors, primary);
            font-size: 1.3rem;
          }
        }

        input {
          flex: 1 1 280px;
          padding: 0.5rem 0.9rem;
          font-size: 1rem;
          border-radius: 8px;
          border: 1.5px solid rgba(map-get($colors, primary), 0.35);
          outline: none;
          color: map-get($colors, dark);
          background: rgba(255, 255, 255, 0.9);
          transition: border-color 0.25s ease, background-color 0.25s ease;

          &:focus {
            border-color: map-get($colors, primary);
            background: rgba(map-get($colors, primary), 0.12);
          }
        }
      }
    }

    .profile-badges {
      margin-top: 1.8rem;

      h4 {
        font-weight: 700;
        color: map-get($colors, primary);
        margin-bottom: 1.1rem;
        font-size: 1.15rem;
        letter-spacing: 0.02em;
      }

      .badges-list {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        list-style: none;
        padding: 0;
        margin: 0;

        .badge {
          background: rgba(map-get($colors, primary), 0.15);
          color: map-get($colors, primary);
          padding: 0.5rem 1.2rem;
          border-radius: 20px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 0.4rem;
          font-size: 0.95rem;
          cursor: default;
          user-select: none;

          i {
            font-size: 1.1rem;
            line-height: 1;
          }

          &:hover {
            background: rgba(map-get($colors, primary), 0.22);
          }
        }
      }
    }

    .save-btn {
      align-self: flex-start;
      margin-top: 2rem;
      padding: 0.9rem 2.3rem;
      font-weight: 700;
      font-size: 1rem;
      background: map-get($colors, primary);
      color: map-get($colors, light);
      border: none;
      border-radius: 32px;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(map-get($colors, primary), 0.4);
      transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;

      &:hover,
      &:focus {
        background: map-get($colors, 'primary-light');
        box-shadow: 0 9px 20px rgba(map-get($colors, 'primary-light'), 0.55);
        outline: none;
        transform: translateY(-2px);
      }
    }
  }

  .profile-stats {
    @extend .glassmorphic;
    padding: 2rem 2.5rem;
    color: map-get($colors, dark);
    user-select: none;

    h3 {
      color: map-get($colors, primary);
      font-weight: 800;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      letter-spacing: 0.03em;
      text-align: center;
    }

    .usage-bars {
      display: flex;
      gap: 1.2rem;
      justify-content: space-around;
      flex-wrap: wrap;

      .usage-item {
        flex: 1 1 180px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 12px;
        padding: 1rem 1.5rem;
        box-shadow: none;
        user-select: text;

        strong {
          display: block;
          font-size: 1.15rem;
          margin-bottom: 0.3rem;
          color: map-get($colors, primary-dark);
          font-weight: 700;
        }

        .progress-bar {
          width: 100%;
          height: 10px;
          background: rgba(map-get($colors, primary), 0.15);
          border-radius: 8px;
          overflow: hidden;
          user-select: none;

          .progress-fill {
            height: 10px;
            background: map-get($colors, primary);
            width: 0%;
            border-radius: 8px;
            transition: width 0.5s ease;
          }
        }
      }
    }

    .usage-charts {
      margin-top: 2rem;
      display: flex;
      justify-content: space-between;
      gap: 2rem;

      canvas {
        flex: 1 1 45%;
        max-width: 100%;
        height: 250px;
      }
    }
  }

  // Responsive

  @media (max-width: 1024px) {
    padding: 2.5rem 3rem;

    .profile-info {
      .profile-basic {
        flex-direction: column;
      }

      .profile-contact {
        flex-direction: column;
      }

      .profile-badges {
        .badges-list {
          justify-content: flex-start;
        }
      }
    }

    .profile-stats {
      .usage-charts {
        flex-direction: column;

        canvas {
          height: 220px;
          margin-bottom: 1.5rem;
        }
      }
    }
  }

  @media (max-width: 480px) {
    padding: 1.5rem 1.8rem;

    .profile-header {
      height: 160px;

      .banner-upload-label {
        .banner-image {
          height: 160px;
          border-radius: 16px 16px 0 0;
        }
      }

      .profile-pic-wrapper {
        bottom: -42px;
        left: 1.5rem;
        width: 90px;
        height: 90px;
        border: 2.5px solid map-get($colors, primary);
      }
    }

    .profile-info {
      margin-top: 3.5rem;

      .profile-basic {
        font-size: 1.25rem;
        gap: 1rem;

        .editable-field {
          font-size: 1.4rem;
          min-height: 32px;
        }
      }

      .profile-bio textarea {
        min-height: 70px;
      }
    }

    .profile-stats {
      padding: 1.5rem 1.8rem;

      .usage-bars {
        gap: 1rem;

        .usage-item {
          flex: 1 1 100%;
        }
      }

      .usage-charts canvas {
        height: 180px;
      }
    }
  }
}