@use '../abstracts/variables';
@use '../abstracts/mixins' as *;

.send-page {
  /* ======= Yeni: Baz tipografi & ölçüler ======= */
  --card-bg: rgba(255, 255, 255, 0.08);
  --bd: 1px solid rgba(255, 255, 255, 0.16);
  --radius: 1rem;
  --pad: 1.25rem;

  /* Light temada daha okunaklı base font */
  font-size: clamp(16px, 1.05vw + 0.25rem, 18px);
  line-height: 1.6;

  color: map-get(variables.$colors, dark);
  padding: clamp(1rem, 2vw, 2rem);

  .glass {
    background: var(--card-bg);
    backdrop-filter: blur(16px);
    border: var(--bd);
    border-radius: var(--radius);
    box-shadow: 0 8px 24px rgba(0, 0, 0, .12);
  }

  .send-header {
    padding: var(--pad);

    &__title {
      h2 {
        /* Başlık daha belirgin */
        font-size: clamp(1.5rem, 1.2vw + 1rem, 2rem);
        margin: 0 0 .25rem;
        line-height: 1.25;
      }

      .alt {
        opacity: .8;
        font-size: clamp(.95rem, .3vw + .75rem, 1.05rem);
      }
    }

    .send-summary {
      display: grid;
      grid-template-columns: 1fr;
      /* mobile-first */
      gap: .75rem;
      margin-top: 1rem;

      /* ≥600px: 2 sütun */
      @media (min-width: 600px) {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      /* ≥960px: 3 sütun */
      @media (min-width: 960px) {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }

      .chip {
        display: flex;
        align-items: center;
        gap: .5rem;
        padding: clamp(.6rem, .5vw + .4rem, .9rem) clamp(.7rem, .6vw + .4rem, 1rem);
        border-radius: .8rem;
        border: 1px dashed rgba(255, 255, 255, .18);
        background: rgba(255, 255, 255, .04);

        i {
          opacity: .9;
          font-size: 1.05em;
        }

        span {
          opacity: .9;
          font-size: .95em;
        }

        strong {
          margin-left: auto;
          font-weight: 700;
          font-size: 1em;
        }
      }
    }
  }

  .send-layout {
    display: grid;
    gap: clamp(.8rem, .8vw, 1.25rem);
    margin-top: 1rem;
    /* mobile: tek sütun */

    /* ≥992px: 2 sütun */
    @media (min-width: 992px) {
      grid-template-columns: 2fr 1.1fr;
      align-items: start;
    }
  }

  .send-card {
    padding: clamp(.9rem, 1vw + .5rem, var(--pad));

    .card__head {
      display: flex;
      align-items: baseline;
      gap: .75rem;

      h3 {
        margin: 0;
        font-size: clamp(1.05rem, .5vw + .9rem, 1.25rem);
      }

      .link {
        margin-left: auto;
        font-size: clamp(.9rem, .2vw + .8rem, 1rem);
        text-decoration: underline;
        color: map-get(variables.$colors, primary-aqua);
      }

      .hint {
        opacity: .75;
        font-size: clamp(.85rem, .2vw + .75rem, .95rem);
      }
    }
  }

  .preview-frame {
    margin-top: .75rem;
    border-radius: .8rem;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, .14);
    background: rgba(0, 0, 0, .06);

    iframe {
      display: block;
      width: 100%;
      /* Yükseklik cihazlara göre: küçükte 320px, büyükte 560px */
      height: clamp(320px, 52vh, 560px);
      border: 0;
    }

    .preview-placeholder {
      display: grid;
      place-items: center;
      min-height: 260px;
      color: rgba(0, 0, 0, .55);

      i {
        font-size: clamp(1.6rem, .8vw + 1.2rem, 2rem);
        margin-bottom: .5rem;
      }
    }
  }

  .msg-editor {
    margin-top: .75rem;

    .field {
      display: grid;
      gap: .4rem;
      margin-bottom: clamp(.7rem, .5vw, .9rem);

      &__label {
        font-weight: 600;
        font-size: clamp(.95rem, .2vw + .85rem, 1.05rem);
      }

      &__control {
        width: 100%;
        padding: clamp(.75rem, .5vw + .6rem, .95rem) clamp(1rem, .6vw + .8rem, 1.1rem);
        border-radius: .7rem;
        border: 1px solid rgba(0, 0, 0, .12);
        background: #fff;
        color: map-get(variables.$colors, dark);
        resize: vertical;
        min-height: 2.75rem;
      }
    }

    .count-hint {
      opacity: .7;
      font-size: clamp(.8rem, .2vw + .7rem, .9rem);
    }

    .msg-advanced {
      margin-top: .25rem;

      summary {
        cursor: pointer;
        opacity: .9;
        font-size: clamp(.95rem, .2vw + .85rem, 1.05rem);
        margin-bottom: .5rem;
      }

      &__grid {
        display: grid;
        gap: clamp(.7rem, .6vw, .9rem);
        grid-template-columns: 1fr;

        @media (min-width: 821px) {
          grid-template-columns: 1fr 1fr;
        }
      }
    }
  }

  .channel-list {
    margin-top: .5rem;
    display: grid;
    gap: .6rem;

    .toggle {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: .75rem;
      padding: clamp(.6rem, .5vw + .4rem, .8rem) clamp(.8rem, .6vw + .6rem, 1rem);
      border-radius: .8rem;
      border: 1px solid rgba(0, 0, 0, .12);
      background: #fff;
      cursor: pointer;

      input {
        display: none;
      }

      &__ui {
        display: inline-flex;
        align-items: center;
        gap: .6rem;

        i {
          font-size: 1rem;
        }

        span {
          font-weight: 600;
        }
      }

      .meta {
        opacity: .8;
        font-size: clamp(.85rem, .2vw + .75rem, .95rem);
      }

      &:has(input:checked) {
        border-color: map-get(variables.$colors, primary-aqua);
        background: rgba(0, 255, 255, .06);
      }

      &.disabled {
        opacity: .6;
        cursor: not-allowed;
      }
    }
  }

  .schedule {
    display: grid;
    gap: .6rem;
    margin-top: .5rem;

    .radio {
      display: inline-flex;
      align-items: center;
      gap: .5rem;

      input {
        accent-color: map-get(variables.$colors, primary-aqua);
      }
    }

    &__row {
      display: grid;
      gap: .6rem;
      grid-template-columns: 1fr;
      /* mobile */

      @media (min-width: 700px) {
        grid-template-columns: 1fr 1fr;
        /* ≥700px çift sütun */
      }

      .field {
        &__control {
          padding: .7rem .9rem;
          border-radius: .6rem;
          background: #fff;
          border: 1px solid rgba(0, 0, 0, .12);
          color: map-get(variables.$colors, dark);
        }
      }
    }

    .hint {
      opacity: .75;
      font-size: clamp(.85rem, .2vw + .75rem, .95rem);
    }
  }

  .summary-list {
    list-style: none;
    padding: 0;
    margin: .5rem 0 1rem;
    display: grid;
    gap: .4rem;

    li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff;
      border: 1px solid rgba(0, 0, 0, .12);
      padding: clamp(.55rem, .5vw + .45rem, .8rem) clamp(.7rem, .6vw + .6rem, 1rem);
      border-radius: .6rem;

      span {
        opacity: .9;
      }

      strong {
        font-weight: 700;
      }
    }
  }

  .agree {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    margin-bottom: clamp(.7rem, .5vw, .9rem);

    input {
      accent-color: map-get(variables.$colors, primary-aqua);
    }
  }

  .actions {
    display: flex;
    gap: .6rem;
    flex-wrap: wrap;

    .btn {
      padding: clamp(.68rem, .5vw + .5rem, .85rem) clamp(.95rem, .8vw + .7rem, 1.2rem);
      border-radius: .7rem;
      font-weight: 700;
      border: 1px solid transparent;
      font-size: clamp(.95rem, .2vw + .85rem, 1.05rem);

      &.btn--primary {
        background: map-get(variables.$colors, primary);
        color: #fff;
      }

      &.btn--outlined {
        background: transparent;
        border-color: rgba(0, 0, 0, .18);
        color: map-get(variables.$colors, dark);
      }
    }
  }

  /* ======= Küçük ekran iyileştirmeleri ======= */
  @media (max-width: 480px) {
    --radius: .9rem;

    padding: clamp(.75rem, 3vw, 1rem);

    .send-card {
      padding: clamp(.8rem, 3vw, 1rem);
    }

    .preview-frame {
      border-radius: .7rem;
    }
  }

  /* Hareket azaltma saygısı */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition: none !important;
      animation: none !important;
    }
  }
}

/* Send sayfası: büyük, rahat send-btn’ler */
.send-page {

  /* İki butonun dizilimini mobile-first grid’e çeviriyoruz */
  .actions {
    display: grid;
    grid-template-columns: 1fr;
    /* mobile: alt alta */
    gap: .9rem;

    @media (min-width: 700px) {
      grid-template-columns: auto auto;
      /* tablet/üstü: yan yana */
      justify-content: start;
      align-items: center;
    }

    .send-btn {
      /* boyutlar */
      font-size: clamp(1rem, 0.35vw + 0.95rem, 1.135rem);
      padding: clamp(.9rem, .6vw + .65rem, 1.15rem) clamp(1.1rem, 1vw + .8rem, 1.6rem);
      min-height: 46px;
      /* dokunma hedefi ≥44px */
      border-radius: .8rem;
      line-height: 1.2;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .55rem;
      transition: box-shadow .2s ease, transform .06s ease, filter .2s ease;

      /* küçük ekranda tam genişlik */
      @media (max-width: 600px) {
        width: 100%;
      }

      /* büyük ekranlarda biraz daha iri tipografi */
      @media (min-width: 1200px) {
        font-size: clamp(1.05rem, .25vw + 1rem, 1.22rem);
        padding: 1rem 1.55rem;
      }

      i {
        font-size: 1.1em;
      }

      &:active {
        transform: translateY(1px);
      }

      &:focus-visible {
        outline: 3px solid rgba(0, 170, 255, .35);
        outline-offset: 2px;
      }

      &.btn--primary {
        box-shadow: 0 6px 18px rgba(0, 0, 0, .12);

        &:hover {
          filter: brightness(1.02);
          box-shadow: 0 8px 22px rgba(0, 0, 0, .14);
        }
      }

      &.btn--outlined {
        background: #fff;
        color: map-get(variables.$colors, dark);
        border-color: rgba(0, 0, 0, .18);

        &:hover {
          border-color: rgba(0, 0, 0, .28);
          box-shadow: 0 4px 12px rgba(0, 0, 0, .07);
        }
      }

      &:disabled,
      &[disabled] {
        opacity: .6;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }
    }
  }
}

/* Sekmeler: arkaplan yeşil */
.channel-previews .preview-tabs .tab.active,
.channel-previews .preview-tabs .tab[aria-selected="true"] {
  background: #27AE60 !important;
  /* tema yeşilin varsa bunun yerine kullan: var(--primary) */
  color: #fff !important;
  box-shadow: 0 6px 16px rgba(39, 174, 96, .22), inset 0 0 0 1px rgba(0, 0, 0, .06);
}

/* Hover state’inde de yeşil ton */
.channel-previews .preview-tabs .tab:hover {
  background: rgba(39, 174, 96, .18) !important;
  color: #fff;
}

/* Focus görünürlüğü */
.channel-previews .preview-tabs .tab:focus-visible {
  outline: 3px solid rgba(39, 174, 96, .45);
  outline-offset: 2px;
}

/* Sekme çubuğu boşluğu biraz artsın ve taşarsa alt satıra geçebilsin */
.channel-previews .preview-tabs {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

/* Sekmeler: daha büyük boyutlar */
.channel-previews .preview-tabs .tab {
  /* yazı daha büyük */
  font-size: clamp(1rem, 1.1vw, 1.2rem);
  /* iç boşluklar daha geniş */
  padding: clamp(.8rem, 1.2vw, 1rem) clamp(1.2rem, 2vw, 1.6rem);
  /* dokunmatik için minimum yükseklik */
  min-height: 48px;
  border-radius: 12px;
  line-height: 1;
  /* dikey merkezlenme */
}

/* İkonu da büyüt */
.channel-previews .preview-tabs .tab i {
  font-size: 1.25em;
}

/* Aktif/selected olan sekme (yeşil arkaplan korunur) */
.channel-previews .preview-tabs .tab.active,
.channel-previews .preview-tabs .tab[aria-selected="true"] {
  background: #27AE60 !important;
  color: #fff !important;
  box-shadow: 0 6px 16px rgba(39, 174, 96, .22), inset 0 0 0 1px rgba(0, 0, 0, .06);
}

/* Hover/focus durumları */
.channel-previews .preview-tabs .tab:hover {
  background: rgba(39, 174, 96, .18) !important;
  color: #fff;
}

.channel-previews .preview-tabs .tab:focus-visible {
  outline: 3px solid rgba(39, 174, 96, .45);
  outline-offset: 2px;
}

/* Küçük ekranlarda taşmayı önle (yine büyük kalsın) */
@media (max-width: 480px) {
  .channel-previews .preview-tabs .tab {
    font-size: 1.05rem;
    min-height: 46px;
    padding: .75rem 1.2rem;
  }
}